<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sistema de Turnos Predicación</title>

  <style>
    :root {
      --bg-dark: #121212;
      --bg-body: #1e1e1e;
      --bg-card-blue: #2c2c3e;
      --green: #04c92f;
      --primary-orange: #f36100;
      --text-white: #ffffff;
      --text-gray: #a0a0a0;
      --radius: 24px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: var(--bg-body);
      color: var(--text-white);
      display: flex;
      justify-content: center;
      min-height: 100vh;
    }

    .app-wrapper {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
      width: 100%;
      max-width: 1100px;
      padding: 20px;
    }

    .screen {
      background-color: var(--bg-dark);
      border-radius: var(--radius);
      overflow: hidden;
      height: 850px;
      display: flex;
      flex-direction: column;
    }

    /* --- LOCACIONES (LISTA PRINCIPAL) --- */
    .scroll-container { padding: 20px; overflow-y: auto; flex-grow: 1; }

    .location-card {
      padding: 20px;
      border-radius: var(--radius);
      margin-bottom: 15px;
      cursor: pointer;
      transition: 0.3s;
      border: 2px solid transparent;

      /* Se mantiene tu base, pero ahora soporta imagen */
      background-color: #222;
      background-size: cover;
      background-position: center;

      position: relative;
      min-height: 100px;
      display: flex;
      align-items: flex-end;
      overflow: hidden; /* para que el overlay respete el radio */
    }

    /* Overlay para legibilidad del texto (no cambia layout) */
    .location-card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(
        to top,
        rgba(0,0,0,0.75),
        rgba(0,0,0,0.15)
      );
      pointer-events: none;
    }

    .location-card.active { border-color: var(--primary-orange); }

    .card-label {
      position: relative;
      z-index: 1;
    }

    .card-label h2 { margin: 0; font-size: 1.1rem; }

    /* --- DETALLES (VISTA SECUNDARIA) --- */
    .hero-img {
      height: 160px;
      background-color: #333;
      background-size: cover;
      background-position: center;
      position: relative;
      overflow: hidden;
    }

    /* Overlay para que el botón y título se lean bien (no mueve nada) */
    .hero-img::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(
        to top,
        rgba(0,0,0,0.65),
        rgba(0,0,0,0.10)
      );
      pointer-events: none;
    }

    .back-btn {
      position: absolute; top: 15px; left: 15px;
      background: rgba(0,0,0,0.6); border: none; color: white;
      padding: 8px 15px; border-radius: 20px; cursor: pointer;
      display: none; /* Se muestra solo en móvil */
      font-weight: bold; align-items: center; gap: 5px;
      z-index: 2;
    }

    .days-row {
      display: flex;
      gap: 10px;
      margin: 20px 0;
    }

    .day-btn {
      flex: 1;
      text-align: center;
      color: var(--text-gray);
      cursor: pointer;
      font-weight: 700;

      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;

      border-radius: 999px;
      padding: 0 10px;
      line-height: 1;
    }

    .day-btn.active {
      background: #fff;
      color: var(--primary-orange);
      border-radius: 999px;
    }

    /* TURNOS */
    .slot { padding: 20px; border-radius: var(--radius); margin-bottom: 12px; }
    .turno-M  { background-color: var(--primary-orange) !important; }
    .turno-T  { background-color: var(--bg-card-blue) !important; }
    .turno-TD { background-color: var(--green) !important; }

    .slot h4 { margin: 0 0 10px 0; font-size: 1.05rem; color: white; }
    .badge { background: rgba(255,255,255,0.2); padding: 4px 12px; border-radius: 12px; font-size: 0.8rem; color: white; }

    /* --- LÓGICA RESPONSIVE --- */
    @media (min-width: 768px) {
      .app-wrapper { grid-template-columns: 350px 1fr; }
      #detail-screen { display: flex !important; } /* Siempre visible en PC */
      .back-btn { display: none !important; }
    }

    @media (max-width: 767px) {
      .app-wrapper { padding: 0; }
      .screen { height: 100vh; border-radius: 0; }
      #detail-screen { display: none; } /* Oculto por defecto en móvil */
      .back-btn { display: flex; }
    }

    .p-20 { padding: 20px; }
  </style>
</head>

<body>
  <div class="app-wrapper">

    <section class="screen" id="list-screen">
      <div class="p-20"><h1 style="margin:0">Locaciones</h1></div>

      <div class="scroll-container">
        <div class="location-card active" onclick="selectPoint('Clínica Cordillera', this)">
          <div class="card-label"><h2>Clínica Cordillera</h2></div>
        </div>

        <div class="location-card" onclick="selectPoint('Supermercado Lider', this)">
          <div class="card-label"><h2>Supermercado Lider</h2></div>
        </div>

        <div class="location-card" onclick="selectPoint('Santa Zita', this)">
          <div class="card-label"><h2>Santa Zita</h2></div>
        </div>

        <div class="location-card" onclick="selectPoint('Visviri/Supermercado Santa Isabel', this)">
          <div class="card-label"><h2>Visviri / Santa Isabel</h2></div>
        </div>

        <div class="location-card" onclick="selectPoint('Feria de Francisco Bilbao (Curaco)', this)">
          <div class="card-label"><h2>Feria de Francisco Bilbao (Curaco)</h2></div>
        </div>

        <div class="location-card" onclick="selectPoint('Parque Intercomunal', this)">
          <div class="card-label"><h2>Parque Intercomunal</h2></div>
        </div>

        <div class="location-card" onclick="selectPoint('Patricia', this)">
          <div class="card-label"><h2>Patricia</h2></div>
        </div>
      </div>
    </section>

    <section class="screen" id="detail-screen">
      <div class="hero-img">
        <button class="back-btn" onclick="goBack()">← Volver</button>
      </div>

      <div class="p-20">
        <h2 id="currentPointTitle" style="margin:0">Clínica Cordillera</h2>

        <div class="days-row">
          <div class="day-btn active" onclick="setDay('Lunes', this)">Lun</div>
          <div class="day-btn" onclick="setDay('Martes', this)">Mar</div>
          <div class="day-btn" onclick="setDay('Miercoles', this)">Mie</div>
          <div class="day-btn" onclick="setDay('Jueves', this)">Jue</div>
          <div class="day-btn" onclick="setDay('Viernes', this)">Vie</div>
          <div class="day-btn" onclick="setDay('Sabado', this)">Sab</div>
          <div class="day-btn" onclick="setDay('Domingo', this)">Dom</div>
        </div>

        <div id="slotsContainer">Cargando...</div>
      </div>
    </section>

  </div>

  <script>
    const SHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSSVTME1tFKORVdcn5noIwMpgV6v7Ehm1RbodRcEOJfnjdbIEIRT87nYVxc6ySprl3RrZCUzsiYpH64/pub?output=csv';

    let allData = [];
    let currentDay = 'Lunes';
    let currentPoint = 'Clínica Cordillera';

    // ✅ IMÁGENES POR PUNTO (cambia las URLs por las tuyas cuando quieras)
    const POINT_IMAGES = {
      "Clínica Cordillera": "data:image/jpeg;base64,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",
      "Supermercado Lider": "https://images.unsplash.com/photo-1601598851547-4302969d0614?auto=format&fit=crop&w=1200&q=60",
      "Santa Zita": "https://images.unsplash.com/photo-1601598851547-4302969d0614?auto=format&fit=crop&w=1200&q=60",
      "Visviri / Santa Isabel": "https://images.unsplash.com/photo-1542831371-29b0f74f9713?auto=format&fit=crop&w=1200&q=60",
      "Feria de Francisco Bilbao (Curaco)": "https://images.unsplash.com/photo-1506806732259-39c2d0268443?auto=format&fit=crop&w=1200&q=60",
      "Parque Intercomunal": "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=1200&q=60",
      "Patricia": "https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?auto=format&fit=crop&w=1200&q=60"
    };

    function applyImagesToCards() {
      document.querySelectorAll('.location-card').forEach(card => {
        const titleEl = card.querySelector('h2');
        const name = titleEl ? titleEl.innerText.trim() : "";
        const img = POINT_IMAGES[name];

        if (img) {
          card.style.backgroundImage = `url('${img}')`;
        } else {
          card.style.backgroundImage = 'none';
          card.style.backgroundColor = '#222';
        }
      });
    }

    function setHeroImage(pointName) {
      const hero = document.querySelector('.hero-img');
      const img = POINT_IMAGES[pointName];

      if (img) hero.style.backgroundImage = `url('${img}')`;
      else hero.style.backgroundImage = 'none';
    }

function norm(str) {
  return (str ?? "")
    .toString()
    .trim()
    .replace(/\u00A0/g, " ")        // espacios raros
    .replace(/\s+/g, " ")           // colapsa espacios
    .replace(/\s*\/\s*/g, "/")      // " / " -> "/"
    .toLowerCase();
}

    
    async function loadData() {
      try {
        const response = await fetch(SHEET_URL);
        const text = await response.text();
        const rows = text.split(/\r?\n/).filter(row => row.trim() !== "").slice(1);

        allData = rows.map(row => {
          const cols = row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
          return {
  dia: cols[0] ? cols[0].trim() : "",
  tipo: cols[1] ? cols[1].trim().replace(/"/g, "").toUpperCase() : "",
  participantes: cols[2] ? cols[2].trim().replace(/"/g, "") : "",
  horario: cols[3] ? cols[3].trim().replace(/"/g, "") : "",
  punto: cols[4] ? cols[4].trim().replace(/"/g, "") : "",
  puntoNorm: norm(cols[4] ? cols[4].trim().replace(/"/g, "") : "")
};

        });

        renderSlots();
      } catch (e) {
        document.getElementById('slotsContainer').innerHTML = "Error de conexión.";
      }
    }

    function selectPoint(name, el) {
      currentPoint = name;
      document.getElementById('currentPointTitle').innerText = name;

      // ✅ actualiza imagen del header
      setHeroImage(name);

      document.querySelectorAll('.location-card').forEach(c => c.classList.remove('active'));
      el.classList.add('active');

      renderSlots();

      // En móvil, cambiar de pantalla
      if (window.innerWidth < 768) {
        document.getElementById('list-screen').style.display = 'none';
        document.getElementById('detail-screen').style.display = 'flex';
        window.scrollTo(0, 0);
      }
    }

    function goBack() {
      document.getElementById('list-screen').style.display = 'flex';
      document.getElementById('detail-screen').style.display = 'none';
    }

    function setDay(day, el) {
      currentDay = day;
      document.querySelectorAll('.day-btn').forEach(b => b.classList.remove('active'));
      el.classList.add('active');
      renderSlots();
    }

    function renderSlots() {
      const container = document.getElementById('slotsContainer');
      container.innerHTML = '';

     const filtered = allData.filter(d =>
  d.dia.toLowerCase() === currentDay.toLowerCase() &&
  d.puntoNorm === norm(currentPoint)
);


      if (filtered.length === 0) {
        container.innerHTML = `<p style="text-align:center; color:gray; margin-top:40px;">No hay turnos para este día.</p>`;
        return;
      }

      filtered.forEach(t => {
        const div = document.createElement('div');

        const tipoRaw = (t.tipo ?? '').toString();
        const tipo = tipoRaw
          .replace(/\u00A0/g, ' ')
          .replace(/\s+/g, '')
          .replace(/"/g, '')
          .toUpperCase();

        const tipoNorm = tipo.replace('/', '');

        let clase = 'turno-M';
        if (tipoNorm.includes('TD')) clase = 'turno-TD';
        else if (tipoNorm.startsWith('T')) clase = 'turno-T';
        else if (tipoNorm.startsWith('M')) clase = 'turno-M';

        div.className = `slot ${clase}`;
        div.innerHTML = `<h4>${t.participantes}</h4><span class="badge">${t.horario}</span>`;
        container.appendChild(div);
      });
    }

    // ✅ Inicialización
    applyImagesToCards();        // pone imagen a las tarjetas del listado
    setHeroImage(currentPoint);  // pone imagen arriba según el punto inicial
    loadData();
  </script>
</body>
</html>
